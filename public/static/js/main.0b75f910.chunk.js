(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),i=n.n(r),s=n(6),c=n.n(s),o=n(9),l=n(2),u=n.p+"static/media/header_logo.4e8e0a1d.svg";var d=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{src:u,alt:"header-logo",className:"logo"})})},m=i.a.createContext();var f=function(e){var t=i.a.useContext(m),n=e.owner._id===t._id,r="element__delete ".concat(n?"element__delete_show":"element__delete_hidden"),s=e.likes.some((function(e){return e._id===t._id})),c="element__like ".concat(s?"element__like_active":"element__like");return Object(a.jsxs)("li",{className:"element__item",children:[Object(a.jsx)("button",{type:"button","aria-label":"delete-card",className:r,onClick:function(){e.onDeleteClick(e.card)}}),Object(a.jsx)("img",{className:"element__photo",src:e.src,alt:e.alt,onClick:function(){e.onCardClick(e.card)}}),Object(a.jsxs)("div",{className:"element__details",children:[Object(a.jsx)("h2",{className:"element__name",children:e.title}),Object(a.jsxs)("div",{className:"element__likes",children:[Object(a.jsx)("button",{type:"button","aria-label":"like-card",className:c,onClick:function(){e.onLickeClick(e.card)}}),Object(a.jsx)("p",{className:"element__like_count",children:e.likes.length})]})]})]})};var h=function(e){var t=i.a.useContext(m);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__avatar",children:[Object(a.jsx)("img",{src:t.avatar,alt:"profile-pic",className:"profile__photo"}),Object(a.jsx)("button",{type:"button","aria-label":"edit-avatar",className:"profile__photo_edit",onClick:e.handleEditAvatarBtn})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__title",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("button",{type:"button","aria-label":"edit-profile",className:"profile__edit",onClick:e.handleEditProfileBtn})]}),Object(a.jsx)("p",{className:"profile__description",children:t.about})]}),Object(a.jsx)("button",{"aria-label":"add-card-button",className:"add-button",onClick:e.handleAddCardBtn})]}),Object(a.jsx)("section",{className:"elements",children:Object(a.jsx)("ul",{className:"elements__list",children:e.cards.map((function(t,n){return Object(a.jsx)(f,{card:t,alt:t.alt,src:t.src,title:t.title,likes:t.likes,owner:t.owner,onCardClick:function(){return e.handleCardClick(t)},onDeleteClick:function(t){return e.handleCardDelete(t)},onLickeClick:function(t){return e.handleCardLike(t)}},n)}))})})]})})};var _=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__item",children:"\xa9 2020 Around The U.S."})})};var p=function(e){return Object(a.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_open":""),onClick:e.onClose,children:Object(a.jsxs)("form",{action:"#",id:e.name,name:e.name,onSubmit:e.onSubmit,className:"form popup__form form_".concat(e.name),noValidate:!0,children:[Object(a.jsx)("h2",{className:"form__title",children:e.title}),Object(a.jsx)("fieldset",{className:"form__field",children:e.children}),Object(a.jsx)("button",{type:"submit","aria-label":"save-edit-avatar",className:e.submitButtonClassName,children:e.submitButton}),Object(a.jsx)("button",{type:"button","aria-label":"close-edit-avatar",className:"popup__close form__close-button",onClick:e.onClose})]})})};var b=function(e){var t=i.a.useState(""),n=Object(l.a)(t,2),r=n[0],s=n[1],c=i.a.useState(""),o=Object(l.a)(c,2),u=o[0],d=o[1];return Object(a.jsxs)(p,{name:"add-card",title:"New Place",submitButton:"Save",submitButtonClassName:"form__submit",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.handleAddNewCard({name:r,link:u})},children:[Object(a.jsx)("input",{id:"card-title",type:"text",name:"name",className:"form__input form__input_type_card-title",placeholder:"Title",minLength:"2",maxLength:"30",value:r,onChange:function(e){s(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"card-title-error",className:"form__field form__field_error"}),Object(a.jsx)("input",{id:"card-url",type:"url",name:"link",className:"form__input form__input_type_card-url",placeholder:"Image link",value:u,onChange:function(e){d(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"card-url-error",className:"form__field form__field_error"})]})};var j=function(e){var t=i.a.useRef();return Object(a.jsxs)(p,{name:"edit-avatar",title:"Change Profile Picture",submitButton:"Save",submitButtonClassName:"form__submit",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar(t.current.value),t.current.value=""},children:[Object(a.jsx)("input",{ref:t,id:"avatar-url",type:"url",name:"link",className:"form__input form__input_type_avatar-url",placeholder:"Avatar link",required:!0}),Object(a.jsx)("span",{id:"avatar-url-error",className:"form__field form__field_error"})]})};var v=function(e){var t=i.a.useState(""),n=Object(l.a)(t,2),r=n[0],s=n[1],c=i.a.useState(""),o=Object(l.a)(c,2),u=o[0],d=o[1],f=i.a.useContext(m);return i.a.useEffect((function(){s(f.name||""),d(f.about||"")}),[f]),Object(a.jsxs)(p,{name:"edit-profile",title:"Edit Profile",submitButton:"Save",submitButtonClassName:"form__submit",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onProfileUpdate({name:r,about:u})},children:[Object(a.jsx)("input",{id:"profile-name",type:"text",name:"name",className:"form__input form__input_type_name",placeholder:"Name",minLength:"2",maxLength:"30",value:r,onChange:function(e){s(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"profile-name-error",className:"form__field form__field_error"}),Object(a.jsx)("input",{id:"profile-description",type:"text",name:"about",className:"form__input form__input_type_description",placeholder:"About Me",minLength:"2",maxLength:"200",value:u,onChange:function(e){d(e.target.value)},required:!0}),Object(a.jsx)("span",{id:"profile-description-error",className:"form__field form__field_error"})]})};var O=function(e){return Object(a.jsx)("div",{className:"popup popup_type_image ".concat(e.isOpen?"popup_open":""),onClick:e.onClose,children:Object(a.jsxs)("div",{className:"popup__content",children:[Object(a.jsx)("button",{type:"button","aria-label":"close-expand-card",className:"popup__close",onClick:e.onClose}),Object(a.jsxs)("figure",{className:"popup__figure",children:[Object(a.jsx)("img",{className:"popup__image",src:e.src,alt:e.title}),Object(a.jsx)("figcaption",{className:"popup__image-caption",children:e.title})]})]})})},C=n(7),k=n(8),x=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(C.a)(this,e),this._baseUrl=n,this._headers=a}return Object(k.a)(e,[{key:"_checkResult",value:function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(t){return e._checkResult(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(t){return e._checkResult(t)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"addCard",value:function(e){var t=this,n=e.name,a=e.link;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:n,link:a})}).then((function(e){return t._checkResult(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkResult(e)}))}},{key:"addCardLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"PUT"}).then((function(e){return t._checkResult(e)}))}},{key:"removeCardLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkResult(e)}))}},{key:"setUserAvatar",value:function(e){var t=this,n=e.avatar;return fetch(this._baseUrl+"/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:n})}).then((function(e){return t._checkResult(e)}))}},{key:"setUserInfos",value:function(e){var t=this,n=e.name,a=e.about;return fetch(this._baseUrl+"/users/me",{headers:this._headers,method:"PATCH",body:JSON.stringify({name:n,about:a})}).then((function(e){return t._checkResult(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-5",headers:{authorization:"a0a03679-4255-43a8-85cb-b4bca24b592e","Content-Type":"application/json"}});var g=function(){var e=i.a.useState({}),t=Object(l.a)(e,2),n=t[0],r=t[1],s=i.a.useState(!1),c=Object(l.a)(s,2),u=c[0],f=c[1],C=i.a.useState(!1),k=Object(l.a)(C,2),g=k[0],N=k[1],y=i.a.useState(!1),S=Object(l.a)(y,2),U=S[0],L=S[1],A=i.a.useState(!1),B=Object(l.a)(A,2),P=B[0],E=B[1],w=i.a.useState(!1),T=Object(l.a)(w,2),I=T[0],D=T[1],R=i.a.useState({name:"Yosemite",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"}),q=Object(l.a)(R,2),F=q[0],J=q[1],Y=i.a.useState([]),H=Object(l.a)(Y,2),M=H[0],z=H[1];function V(e){J(e),D(!0)}function G(e){(e.likes.some((function(e){return e._id===n._id}))?x.removeCardLike(e.id):x.addCardLike(e.id)).then((function(t){var n=M.map((function(n){return n.id===e.id?W(t):n}));z(n)})).catch((function(e){return console.log(e)}))}function K(e){e.target===e.currentTarget&&(N(!1),L(!1),f(!1),E(!1),D(!1))}function Q(e){x.removeCard(e.id).then((function(){var t=M.filter((function(t){return t.id!==e.id}));z(t)})).catch((function(e){return console.log(e)}))}function W(e){return{alt:e.name,title:e.name,src:e.link,id:e._id,owner:e.owner,likes:e.likes}}return i.a.useEffect((function(){x.getUserInfo().then((function(e){r(e)})).catch((function(e){return console.log(e)})),x.getInitialCards().then((function(e){z(e.map(W))})).catch((function(e){return console.log(e)}))}),[]),Object(a.jsxs)(m.Provider,{value:n,children:[Object(a.jsx)(d,{}),Object(a.jsx)(h,{cards:M,handleEditAvatarBtn:function(){N(!0)},handleEditProfileBtn:function(){L(!0)},handleAddCardBtn:function(){f(!0)},handleCardLike:function(e){return G(e)},handleCardDelete:function(e){return Q(e)},handleCardClick:function(e){return V(e)},onCardClick:function(e){return V(e)},onDeleteClick:function(e){return Q(e)},onLickeClick:function(e){return G(e)}}),Object(a.jsx)(_,{}),Object(a.jsx)(j,{isOpen:g,onClose:K,onUpdateAvatar:function(e){x.setUserAvatar({avatar:e}).then((function(e){r(e)})).then((function(){return N(!1)})).catch((function(e){return console.log(e)}))}}),Object(a.jsx)(v,{isOpen:U,onClose:K,onProfileUpdate:function(e){var t=e.name,n=e.about;x.setUserInfos({name:t,about:n}).then((function(e){r(e)})).then((function(){return L(!1)})).catch((function(e){return console.log(e)}))}}),Object(a.jsx)(b,{isOpen:u,onClose:K,handleAddNewCard:function(e){var t=e.name,n=e.link;x.addCard({name:t,link:n}).then((function(e){return z([W(e)].concat(Object(o.a)(M)))})).then((function(){return f(!1)})).catch((function(e){return console.log(e)}))}}),Object(a.jsx)(p,{name:"delete",title:"Are You Sure?",submitButton:"Yes",isOpen:P,onClose:K,onSubmit:Q}),Object(a.jsx)(O,{src:F.src,title:F.title,isOpen:I,onClose:K})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};n(15);c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root")),N()}},[[16,1,2]]]);
//# sourceMappingURL=main.0b75f910.chunk.js.map